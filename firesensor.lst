C51 COMPILER V9.01   FIRESENSOR                                                            02/24/2017 17:43:42 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE FIRESENSOR
OBJECT MODULE PLACED IN .\hex\firesensor.obj
COMPILER INVOKED BY: D:\Keil_C51\C51\BIN\C51.EXE fireSensor\firesensor.c BROWSE INCDIR(.\motor;.\trace;.\fireSensor) DEB
                    -UG OBJECTEXTEND PRINT(.\firesensor.lst) OBJECT(.\hex\firesensor.obj)

line level    source

   1          #include <reg52.h>
   2          #include "firesensor.h"
   3          //sbit fireSensor[5]={1,1,1,1,1};
   4          sfr fireSensor=0XA0;                    //P2端口的地址
   5          //从左到右 P20 P21 P22 P23 P24
   6          sbit sersor0=P2^0;
   7          sbit sersor1=P2^1;
   8          sbit sersor2=P2^2;
   9          sbit sersor3=P2^3;
  10          sbit sersor4=P2^4;
  11          
  12          uint fireSensorAngle[]={1706,1576,1046,881,2};
  13          
  14          sbit angleMotor=P1^2;
  15          uint checkFire(void)    //返回定时器角度值
  16          {
  17   1              static char fire[5];
  18   1              char i;
  19   1              uint angle;
  20   1              char fs;
  21   1              fs=fireSensor;
  22   1              for(i=0;i<5;i++)
  23   1              {
  24   2                      fire[i]|=(char)(!((fs>>i)&0X01));
  25   2                      if(fire[i])
  26   2                      {
  27   3                              angle=fireSensorAngle[i];                       
  28   3                              return angle;
  29   3                      }
  30   2              }
  31   1              return ANGLE_INIT;                      //如果没有火焰则风扇正对中间      
  32   1      }
  33          
  34          void initAngleMotor(void)
  35          {
  36   1              TMOD&=0XF0;
  37   1              TMOD|=0X01;                             //定时器0 16位定时器
  38   1              TR0=1;
  39   1              ET0=1;
  40   1              EA=1;
  41   1      }
  42          //在main中写T0的中断函数 调整舵机角度 为配合风扇 设置flag
  43          
  44          void angleMotorInterrupt(uint pwmWidth,bit pinState)
  45          {
  46   1              angleMotor=pinState;
  47   1              TH0=(65536-pwmWidth)/256;
  48   1              TL0=(65536-pwmWidth)%256;
  49   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    157    ----
   CONSTANT SIZE    =   ----    ----
C51 COMPILER V9.01   FIRESENSOR                                                            02/24/2017 17:43:42 PAGE 2   

   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     15       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
